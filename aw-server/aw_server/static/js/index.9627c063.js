(function(e){function t(t){for(var a,r,o=t[0],c=t[1],u=t[2],d=0,l=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&l.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);h&&h(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={index:0},s={index:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-1704d656":"d747acf5","chunk-22291cfb":"b34f5b08","chunk-257b8108":"c3fb20d6","chunk-2aac73c2":"3b7e1c13","chunk-2ba3acfc":"dc26da29","chunk-2d0a3c21":"cf77b914","chunk-2d0c0d7f":"2663a859","chunk-2d0c76ef":"72f6f6b2","chunk-2d0c7b05":"0080fde5","chunk-2d0c7f23":"49adb728","chunk-2d0c8a76":"e4c138cb","chunk-0e0e08d4":"a621fc05","chunk-0e4d057b":"51119103","chunk-0de517b8":"07df6e17","chunk-481c03fc":"017c7812","chunk-64b133d7":"2a77c4f5","chunk-963d1074":"10b98900","chunk-aa63c932":"80831624","chunk-2d0c912a":"342fc642","chunk-2d0d6e9b":"8b7462a6","chunk-2d0e4e00":"8c85b787","chunk-2d217e1c":"bae4f72a","chunk-2d21a3d2":"e504cb7e","chunk-2d21abe5":"5be9061b","chunk-34d4cb4e":"a532bfb0","chunk-3cb932d2":"ef2a0066","chunk-3ef7f98e":"2d843db4","chunk-539ab214":"59bbcc59","chunk-604b6336":"91c9ad9d","chunk-8136d428":"3b465179","chunk-caa5c08a":"7fb7f13a"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-257b8108":1,"chunk-2ba3acfc":1,"chunk-0e0e08d4":1,"chunk-0de517b8":1,"chunk-481c03fc":1,"chunk-64b133d7":1,"chunk-963d1074":1,"chunk-aa63c932":1,"chunk-34d4cb4e":1,"chunk-3ef7f98e":1,"chunk-539ab214":1,"chunk-604b6336":1,"chunk-8136d428":1,"chunk-caa5c08a":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-1704d656":"31d6cfe0","chunk-22291cfb":"31d6cfe0","chunk-257b8108":"aed29044","chunk-2aac73c2":"31d6cfe0","chunk-2ba3acfc":"5e3fab43","chunk-2d0a3c21":"31d6cfe0","chunk-2d0c0d7f":"31d6cfe0","chunk-2d0c76ef":"31d6cfe0","chunk-2d0c7b05":"31d6cfe0","chunk-2d0c7f23":"31d6cfe0","chunk-2d0c8a76":"31d6cfe0","chunk-0e0e08d4":"6e09dfe7","chunk-0e4d057b":"31d6cfe0","chunk-0de517b8":"3af5a466","chunk-481c03fc":"f40517e3","chunk-64b133d7":"fb929b1e","chunk-963d1074":"4c33efc4","chunk-aa63c932":"f371213f","chunk-2d0c912a":"31d6cfe0","chunk-2d0d6e9b":"31d6cfe0","chunk-2d0e4e00":"31d6cfe0","chunk-2d217e1c":"31d6cfe0","chunk-2d21a3d2":"31d6cfe0","chunk-2d21abe5":"31d6cfe0","chunk-34d4cb4e":"d9210f9c","chunk-3cb932d2":"31d6cfe0","chunk-3ef7f98e":"e8fd129d","chunk-539ab214":"68fcf068","chunk-604b6336":"c52383a8","chunk-8136d428":"660d3ffe","chunk-caa5c08a":"527b5786"}[e]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===s))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){u=l[o],d=u.getAttribute("data-href");if(d===a||d===s)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],h.parentNode.removeChild(h),n(i)},h.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=i);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}s[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var h=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0794":function(e,t,n){"use strict";var a=n("c641"),r=n.n(a),s=n("9380"),i=n.n(s),o=n("8a30"),c=n.n(o),u=n("2769"),d=n.n(u),l=n("dd61"),h=n.n(l);function f(e){return e.split(";").filter(e=>e).map(e=>e+";")}function p(e){return`\n    events  = flood(query_bucket("${e.bid_window}"));\n    not_afk = flood(query_bucket("${e.bid_afk}"));\n    not_afk = filter_keyvals(not_afk, "status", ["not-afk"]);\n    ${e.filter_afk?"events  = filter_period_intersect(events, not_afk);":""}\n  `}function _(e,t,n,a,r,s,i){e=e.replace('"','\\"'),t=t.replace('"','\\"');const o={bid_window:e,bid_afk:t,classes:s,filter_afk:r},c=`\n      ${p(o)}\n      events = categorize(events, ${JSON.stringify(o.classes)});\n    `+(i?`events = filter_keyvals(events, "$category", ${JSON.stringify(i)});`:"")+`\n    title_events = sort_by_duration(merge_events_by_keys(events, ["app", "title"]));\n    app_events   = sort_by_duration(merge_events_by_keys(title_events, ["app"]));\n    cat_events   = sort_by_duration(merge_events_by_keys(events, ["$category"]));\n\n    events = sort_by_timestamp(events);\n    app_events  = limit_events(app_events, ${n});\n    title_events  = limit_events(title_events, ${a});\n    duration = sum_durations(events);\n    RETURN  = {"app_events": app_events, "title_events": title_events, "cat_events": cat_events, "duration": duration, "active_events": not_afk};`;return f(c)}function b(e,t=5){e=e.replace('"','\\"');const n=`\n    events  = query_bucket("${e}");\n    events  = merge_events_by_keys(events, ["app"]);\n    events  = sort_by_duration(events);\n    events  = limit_events(events, ${t});\n    total_duration = sum_durations(events);\n    RETURN  = {"events": events, "total_duration": total_duration};\n  `;return f(n)}const m={chrome:["Google-chrome","chrome.exe","Chromium","Google Chrome","Chromium-browser","Chromium-browser-chromium","Google-chrome-beta","Google-chrome-unstable","Brave-browser"],firefox:["Firefox","Firefox.exe","firefox","firefox.exe","Firefox Developer Edition","Firefox Beta","Nightly"],opera:["opera.exe","Opera"],brave:["brave.exe"],vivaldi:["Vivaldi-stable","Vivaldi-snapshot","vivaldi.exe"]};function v(e){const t=h()(Object.keys(m),t=>{const n=d()(e,e=>c()(e,t));return[t,n]});return i()(t,([,e])=>void 0!==e)}function y(e){let t=`\n    ${p({...e,filter_afk:!1})}\n    window = events;\n    events = [];\n  `;return r()(v(e.bid_browsers),([n,a])=>{const r=JSON.stringify(m[n]);t+=`events_${n} = flood(query_bucket("${a}"));\n       window_${n} = filter_keyvals(window, "app", ${r});\n       ${e.filter_afk?`window_${n} = filter_period_intersect(window_${n}, not_afk);`:""}\n       events_${n} = filter_period_intersect(events_${n}, window_${n});\n       events_${n} = split_url_events(events_${n});\n       events = sort_by_timestamp(concat(events, events_${n}));`}),t}function k(e,t,n,a=5,r=!0){e=h()(e,e=>e.replace('"','\\"')),t=t.replace('"','\\"'),n=n.replace('"','\\"');const s={bid_window:t,bid_afk:n,bid_browsers:e,classes:{},filter_afk:r};return f(`\n    ${y(s)}\n    urls = merge_events_by_keys(events, ["url"]);\n    urls = sort_by_duration(urls);\n    urls = limit_events(urls, ${a});\n    domains = split_url_events(events);\n    domains = merge_events_by_keys(domains, ["$domain"]);\n    domains = sort_by_duration(domains);\n    domains = limit_events(domains, ${a});\n    duration = sum_durations(events);\n    RETURN = {"domains": domains, "urls": urls, "duration": duration};\n  `)}function g(e,t){return e=e.replace('"','\\"'),['editorbucket = "'+e+'";',"events = flood(query_bucket(editorbucket));",'files = sort_by_duration(merge_events_by_keys(events, ["file", "language"]));',"files = limit_events(files, "+t+");",'languages = sort_by_duration(merge_events_by_keys(events, ["language"]));',"languages = limit_events(languages, "+t+");",'projects = sort_by_duration(merge_events_by_keys(events, ["project"]));',"projects = limit_events(projects, "+t+");","duration = sum_durations(events);",'RETURN = {"files": files, "languages": languages, "projects": projects, "duration": duration};']}function w(e){return e=e.replace('"','\\"'),['afkbucket = "'+e+'";',"not_afk = flood(query_bucket(afkbucket));",'not_afk = merge_events_by_keys(not_afk, ["status"]);',"RETURN = not_afk;"]}function $(e){return e=e.replace('"','\\"'),[`events = query_bucket("${e}");`,"RETURN = sum_durations(events);"]}t["a"]={windowQuery:_,browserSummaryQuery:k,appQuery:b,dailyActivityQuery:w,dailyActivityQueryAndroid:$,editorActivityQuery:g}},"0a4f":function(e,t,n){"use strict";n.r(t),n.d(t,"defaultCategories",(function(){return s})),n.d(t,"build_category_hierarchy",(function(){return i})),n.d(t,"flatten_category_hierarchy",(function(){return o})),n.d(t,"saveClasses",(function(){return c})),n.d(t,"loadClasses",(function(){return u})),n.d(t,"loadClassesForQuery",(function(){return d}));const a=n("2ef0"),r=">",s=[{name:["Work"],rule:{type:"regex",regex:"Google Docs"}},{name:["Work","Programming"],rule:{type:"regex",regex:"GitHub|Stack Overflow"}},{name:["Work","Programming","ActivityWatch"],rule:{type:"regex",regex:"ActivityWatch|aw-",ignore_case:!0}},{name:["Media","Games"],rule:{type:"regex",regex:"Minecraft|RimWorld"}},{name:["Media","Video"],rule:{type:"regex",regex:"YouTube|Plex"}},{name:["Media","Social Media"],rule:{type:"regex",regex:"reddit|Facebook|Twitter|Instagram",ignore_case:!0}},{name:["Comms","IM"],rule:{type:"regex",regex:"Messenger|Telegram|Signal|WhatsApp"}},{name:["Comms","Email"],rule:{type:"regex",regex:"Gmail"}}];function i(e){function t(e){const t=e.name;return e.name_pretty=t.join(r),e.subname=t.slice(-1)[0],e.parent=t.length>1?t.slice(0,-1):null,e.depth=t.length-1,e}const n=e.slice().map(e=>t(e)),a=new Set(n.map(e=>e.name.join(r)));function s(n){n.map(e=>e.parent).filter(e=>!!e).map(n=>{const i=n.join(r);if(n&&!a.has(i)){const r=t({name:n,rule:{type:null}});e.push(r),a.add(i),s([r])}})}function i(t){return t.map(t=>{return t.children=e.filter(e=>{return!(!e.parent||!t.name)&&JSON.stringify(e.parent)==JSON.stringify(t.name)}),i(t.children),t})}return s(n),i(e.filter(e=>!e.parent))}function o(e){return a.flattenDeep(e.map(e=>{const t=[e,o(e.children)];return e.children=[],t}))}function c(e){localStorage.classes=JSON.stringify(e),console.log("Saved classes",localStorage.classes)}function u(){const e=localStorage.classes;return e&&e.length>=1?JSON.parse(e):s}function d(){return u().filter(e=>null!==e.rule.type).map(e=>{return[e.name,e.rule]})}},"17bb":function(e,t,n){"use strict";var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,o)}c((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n("d567");class s{constructor(e,t={}){if(this.heartbeatQueues={},this.clientname=e,this.testing=t.testing||!1,"undefined"===typeof t.baseURL){const e=t.testing?5666:5600;this.baseURL=`http://127.0.0.1:${e}`}else this.baseURL=t.baseURL;this.req=r.default.create({baseURL:this.baseURL+"/api",timeout:3e4})}getInfo(){return a(this,void 0,void 0,(function*(){return this.req.get("/0/info").then(e=>e.data)}))}ensureBucket(e,t,n){return a(this,void 0,void 0,(function*(){try{yield this.req.post(`/0/buckets/${e}`,{client:this.clientname,type:t,hostname:n})}catch(a){if(a&&a.response&&304===a.response.status)return{alreadyExist:!0};throw a}return{alreadyExist:!1}}))}createBucket(e,t,n){return a(this,void 0,void 0,(function*(){yield this.req.post(`/0/buckets/${e}`,{client:this.clientname,type:t,hostname:n})}))}deleteBucket(e){return a(this,void 0,void 0,(function*(){yield this.req.delete(`/0/buckets/${e}?force=1`)}))}getBuckets(){return a(this,void 0,void 0,(function*(){let e=(yield this.req.get("/0/buckets/")).data;return Object.keys(e).forEach(t=>{e[t].created=new Date(e[t].created),e[t].last_updated&&(e[t].last_updated=new Date(e[t].last_updated))}),e}))}getBucketInfo(e){return a(this,void 0,void 0,(function*(){let t=(yield this.req.get(`/0/buckets/${e}`)).data;return t.created=new Date(t.created),t}))}getEvents(e,t){return a(this,void 0,void 0,(function*(){let n=(yield this.req.get("/0/buckets/"+e+"/events",{params:t})).data;return n.forEach(e=>{e.timestamp=new Date(e.timestamp)}),n}))}countEvents(e,t,n){return a(this,void 0,void 0,(function*(){const a={starttime:t?t.toISOString():null,endtime:n?n.toISOString():null};return this.req.get("/0/buckets/"+e+"/events/count",{params:a})}))}insertEvent(e,t){return a(this,void 0,void 0,(function*(){return this.insertEvents(e,[t]).then(e=>e[0])}))}insertEvents(e,t){return a(this,void 0,void 0,(function*(){let n=(yield this.req.post("/0/buckets/"+e+"/events",t)).data;return Array.isArray(n)||(n=[n]),n.forEach(e=>{e.timestamp=new Date(e.timestamp)}),n}))}replaceEvent(e,t){return a(this,void 0,void 0,(function*(){if(void 0===t.id)throw"Can't replace event without ID assigned";return this.insertEvent(e,t)}))}deleteEvent(e,t){return a(this,void 0,void 0,(function*(){yield this.req.delete("/0/buckets/"+e+"/events/"+t)}))}heartbeat(e,t,n){return this.heartbeatQueues.hasOwnProperty(e)||(this.heartbeatQueues[e]={isProcessing:!1,data:[]}),new Promise((a,r)=>{this.heartbeatQueues[e].data.push({onSuccess:a,onError:r,pulsetime:t,heartbeat:n}),this.updateHeartbeatQueue(e)})}query(e,t){return a(this,void 0,void 0,(function*(){const n={query:t,timeperiods:e.map(e=>{return"string"!==typeof e?`${e.start.toISOString()}/${e.end.toISOString()}`:e})};return(yield this.req.post("/0/query/",n)).data}))}send_heartbeat(e,t,n){return a(this,void 0,void 0,(function*(){let a=(yield this.req.post("/0/buckets/"+e+"/heartbeat?pulsetime="+t,n)).data;return a.timestamp=new Date(a.timestamp),a}))}updateHeartbeatQueue(e){const t=this.heartbeatQueues[e];if(!t.isProcessing&&t.data.length){const{pulsetime:n,heartbeat:a,onSuccess:r,onError:s}=t.data.shift();t.isProcessing=!0,this.send_heartbeat(e,n,a).then(n=>{r(n),t.isProcessing=!1,this.updateHeartbeatQueue(e)}).catch(n=>{s(n),t.isProcessing=!1,this.updateHeartbeatQueue(e)})}}}t.AWClient=s},"56d7":function(e,t,n){"use strict";n.r(t);n("e792");var a=n("2b0e"),r=n("5f5b"),s=(n("f9e3"),n("2dd8"),n("dcba"),n("93c6")),i=n.n(s),o=n("5acd"),c=n("c1df"),u=n.n(c);a["default"].filter("shortdate",(function(e){return u()(e).format("YYYY-MM-DD")})),a["default"].filter("friendlytime",(function(e){return Object(o["friendlydate"])(e)})),a["default"].filter("iso8601",(function(e){return u.a.parseZone(e).format()})),a["default"].filter("friendlyduration",(function(e){return Object(o["seconds_to_duration"])(e)})),a["default"].prototype.filters={orderBy:i.a};var d=n("8c4f");const l=()=>n.e("chunk-2d21a3d2").then(n.bind(null,"bb51")),h=()=>n.e("chunk-3ef7f98e").then(n.bind(null,"8884")),f=()=>n.e("chunk-22291cfb").then(n.bind(null,"add8")),p=()=>n.e("chunk-2d0d6e9b").then(n.bind(null,"7529")),b=()=>n.e("chunk-2d0e4e00").then(n.bind(null,"91a3")),m=()=>n.e("chunk-2d0c7f23").then(n.bind(null,"537f")),v=()=>n.e("chunk-3cb932d2").then(n.bind(null,"ba29")),y=()=>n.e("chunk-539ab214").then(n.bind(null,"59e7")),k=()=>n.e("chunk-2d217e1c").then(n.bind(null,"c92b")),g=()=>n.e("chunk-2d21abe5").then(n.bind(null,"bd8e")),w=()=>n.e("chunk-2aac73c2").then(n.bind(null,"f67a")),$=()=>n.e("chunk-2ba3acfc").then(n.bind(null,"f836")),q=()=>n.e("chunk-8136d428").then(n.bind(null,"26d3")),S=()=>n.e("chunk-caa5c08a").then(n.bind(null,"eb8a")),x=()=>n.e("chunk-2d0c0d7f").then(n.bind(null,"4409"));a["default"].use(d["a"]);const O=new d["a"]({routes:[{path:"/",component:l},{path:"/activity/android/:host/:date?",component:v,props:!0},{path:"/activity/:host/:periodLength?/:date?",component:h,props:!0,children:[{path:"window",name:"activity-daily-window",component:p,props:!0},{path:"browser",name:"activity-daily-browser",component:b},{path:"editor",name:"activity-daily-editor",component:m},{path:"",name:"activity-daily-summary",component:f,props:!0}]},{path:"/buckets",component:y},{path:"/buckets/:id",component:k,props:!0},{path:"/timeline",component:w},{path:"/query",component:g},{path:"/log",component:$},{path:"/settings",component:q},{path:"/stopwatch",component:S},{path:"/dev",component:x}]});var C=O,j=n("2f62"),E=n("9380"),B=n.n(E),P=n("dd61"),A=n.n(P),D=n("5492"),R=n.n(D),M=n("8a30"),N=n.n(M),Q=n("3852"),T=n.n(Q),U=n("0794"),I=n("0a4f");const W=100;function L(e){return{start:Object(o["get_day_start_with_offset"])(e),length:[1,"day"]}}function F(e){const t=u()(e.start).format(),n=u()(t).add(e.length[0],e.length[1]).format();return[t,n].join("/")}const H={top_apps:[],top_titles:[],top_domains:[],top_urls:[],top_categories:[],active_events:[],app_chunks:[],web_chunks:[],active_duration:0,active_history:{},query_options:{browser_buckets:"all"},browser_buckets_available:[]};function G(e){const t=[];for(let n=-15;n<=15;n++){const a=u()(e.start).add(n*e.length[0],e.length[1]).format();t.push({...e,start:a})}return t}function J(e){return G(e).map(F)}const Y={getActiveHistoryAroundTimeperiod:e=>t=>{const n=J(t),a=n.map(t=>{return T()(e.active_history,t)?e.active_history[t]:[{timestamp:u()(t.split("/")[0]).format(),duration:0,data:{}}]});return a}},V={async ensure_loaded({commit:e,state:t,dispatch:n},a){console.info("Query options: ",a),!t.loaded||t.query_options!==a||a.force?(e("start_loading",a),a.timeperiod||(a.timeperiod=L(a.date)),await n("get_browser_buckets",a),await n("query_window",a),await n("query_browser",a),await n("query_active_history",a)):console.warn("ensure_loaded called twice with same query_options but without query_options.force = true, skipping...")},async query_window({commit:e},{host:t,timeperiod:n,filterAFK:a,filterCategories:r}){const s=u()(),i=[F(n)],o=Object(I["loadClassesForQuery"])(),c="aw-watcher-window_"+t,d="aw-watcher-afk_"+t,l=U["a"].windowQuery(c,d,W,W,a,o,r),h=await this._vm.$aw.query(i,l);console.info(`Completed window query in ${u()().diff(s)}ms`),e("query_window_completed",h[0])},async query_browser({state:e,commit:t},{host:n,timeperiod:a,filterAFK:r}){const s=u()();if(e.browser_buckets_available){const i=[F(a)],o="aw-watcher-window_"+n,c="aw-watcher-afk_"+n,d=U["a"].browserSummaryQuery(e.browser_buckets_available,o,c,W,r),l=await this._vm.$aw.query(i,d);console.info(`Completed browser query in ${u()().diff(s)}ms`),t("query_browser_completed",l[0])}},async query_active_history({commit:e,state:t},{host:n,timeperiod:a}){const r=J(a).filter(e=>{return!N()(t.active_history,e)});console.log(r);const s="aw-watcher-afk_"+n,i=u()(),o=await this._vm.$aw.query(r,U["a"].dailyActivityQuery(s)),c=R()(r,A()(o,e=>B()(e,e=>"not-afk"==e.data.status)));console.info(`Completed history query in ${u()().diff(i)}ms`),e("query_active_history_completed",{active_history:c})},async get_browser_buckets({commit:e}){let t=await this._vm.$aw.getBuckets();t=A()(B()(t,e=>"web.tab.current"===e["type"]),e=>e["id"]),e("browser_buckets",t)}},z={start_loading(e,t){e.loaded=!0,e.query_options=t,e.top_apps=null,e.top_titles=null,e.top_domains=null,e.top_urls=null,e.top_categories=null,e.active_duration=null,e.active_events=null,e.app_chunks=null,e.web_chunks=null},query_window_completed(e,t){e.top_apps=t["app_events"],e.top_titles=t["title_events"],e.top_categories=t["cat_events"],e.active_duration=t["duration"],e.app_chunks=t["app_chunks"],e.active_events=t["active_events"],console.log(e.active_events)},query_browser_completed(e,t){e.top_domains=t["domains"],e.top_urls=t["urls"],e.web_chunks=t["chunks"]},query_active_history_completed(e,{active_history:t}){e.active_history={...e.active_history,...t}},browser_buckets(e,t){e.browser_buckets_available=t}};var K={namespaced:!0,state:H,getters:Y,actions:V,mutations:z};const Z={buckets:[]},X={browserBuckets(e){return _.map(_.filter(e.buckets,e=>"web.tab.current"===e["type"]),e=>e["id"])},getBucket:e=>t=>_.filter(e.buckets,e=>e.id===t)[0],bucketsByHostname:e=>_.groupBy(e.buckets,"hostname")},ee={async ensureBuckets({state:e,dispatch:t}){0===e.buckets.length&&await t("loadBuckets")},async loadBuckets({commit:e}){const t=await this._vm.$aw.getBuckets();console.info("Received buckets: ",t),e("update_buckets",t)},async getBucketWithEvents({getters:e,dispatch:t},{id:n,start:a,end:r}){await t("ensureBuckets");const s=e.getBucket(n);return s.events=await this._vm.$aw.getEvents(s.id,{start:a,end:r,limit:-1}),s},async getBucketsWithEvents({state:e,dispatch:t},{start:n,end:a}){await t("ensureBuckets");const r=await Promise.all(_.map(e.buckets,async e=>await t("getBucketWithEvents",{id:e.id,start:n,end:a})));return _.orderBy(r,[e=>e.id],["asc"])},async deleteBucket({dispatch:e},{bucketId:t}){console.log(`Deleting bucket ${t}`),await this._vm.$aw.deleteBucket(t),await e("loadBuckets")}},te={update_buckets(e,t){e.buckets=t}};var ne={namespaced:!0,state:Z,getters:X,actions:ee,mutations:te},ae=n("63ea"),re=n.n(ae),se=n("abdd"),ie=n.n(se),oe=n("4d8c"),ce=n.n(oe),ue=n("a8fc"),de=n.n(ue),le=n("c707"),he=n.n(le),fe=n("0644"),pe=n.n(fe);const _e={classes:[],classes_unsaved_changes:!1},be={classes_hierarchy:e=>{const t=Object(I["build_category_hierarchy"])(pe()(e.classes));return he()(t,[e=>e.id||0])},all_categories:e=>{return de()(ce()(e.classes.map(e=>{const t=[];for(let n=1;n<=e.name.length;n++)t.push(e.name.slice(0,n));return t})),e=>e.join(">>>>"))}},me={async load({commit:e}){e("loadClasses",await Object(I["loadClasses"])())},async save({state:e,commit:t}){const n=await Object(I["saveClasses"])(e.classes);return t("saveCompleted"),n}},ve={loadClasses(e,t){let n=0;e.classes=t.map(e=>Object.assign(e,{id:n++})),console.log("Loaded classes:",e.classes),e.classes_unsaved_changes=!1},updateClass(e,t){console.log("Updating class:",t);const n=pe()(e.classes[t.id]);void 0===t.id||null===t.id?(t.id=ie()(A()(e.classes,"id"))+1,e.classes.push(t)):Object.assign(e.classes[t.id],t);const a=n.name.length;A()(e.classes,e=>{re()(n.name,e.name.slice(0,a))&&(e.name=t.name.concat(e.name.slice(a)),console.log("Renamed child:",e.name))}),e.classes_unsaved_changes=!0},addClass(e,t){t.id=ie()(A()(e.classes,"id"))+1,e.classes.push(t),e.classes_unsaved_changes=!0},removeClass(e,t){e.classes=e.classes.filter(e=>e.id!==t.id),e.classes_unsaved_changes=!0},restoreDefaultClasses(e){let t=0;e.classes=I["defaultCategories"].map(e=>Object.assign(e,{id:t++})),e.classes_unsaved_changes=!0},saveCompleted(e){e.classes_unsaved_changes=!1}};var ye={namespaced:!0,state:_e,getters:be,actions:me,mutations:ve};a["default"].use(j["a"]);const ke=!1;var ge=new j["a"].Store({modules:{activity_daily:K,buckets:ne,settings:ye},strict:ke});const we=n("17bb").AWClient;let $e="";const qe=new we("aw-webui",{testing:!1,baseURL:$e});var Se=qe,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wrapper"}},[n("aw-header"),n("div",{staticClass:"container aw-container my-3 py-3"},[n("error-boundary",[n("router-view")],1)],1),n("div",{staticClass:"container",staticStyle:{color:"#555"}},[n("div",{staticStyle:{float:"left"}},[e._m(0),n("div",[n("a",{staticClass:"mr-2",attrs:{href:"https://github.com/ActivityWatch/activitywatch",target:"_blank"}},[n("icon",{attrs:{name:"brands/github"}}),e._v("GitHub")],1),n("a",{attrs:{href:"https://twitter.com/ActivityWatchIt",target:"_blank"}},[n("icon",{attrs:{name:"brands/twitter"}}),e._v("Twitter")],1)])]),n("div",{staticStyle:{float:"right","text-align":"right"}},[e._v("Found a bug? "),n("a",{attrs:{href:"https://github.com/ActivityWatch/activitywatch/issues/new"}},[e._v("File an issue")]),n("br"),e._v("Need help? "),n("a",{attrs:{href:"https://forum.activitywatch.net/c/support"}},[e._v("Ask on the forum")]),n("br"),e._v("Missing a feature? "),n("a",{attrs:{href:"https://forum.activitywatch.net/c/features"}},[e._v("Vote on the forum")]),n("br"),e._v("Built something cool? "),n("a",{attrs:{href:"https://forum.activitywatch.net/c/projects"}},[e._v("Share it on the forum")]),n("br"),n("span",{directives:[{name:"show",rawName:"v-show",value:e.info,expression:"info"}],staticClass:"mt-2",staticStyle:{color:"#888","font-size":"0.8em"}},[e._v("Host: "+e._s(e.info.hostname)),n("br"),e._v("Version: "+e._s(e.info.version))])])])],1)},Oe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-1"},[e._v("Made with ❤ by the "),n("a",{attrs:{href:"http://activitywatch.net/contributors/"}},[e._v("ActivityWatch developers")])])}],Ce=(n("1e91"),n("3550"),{data:function(){return{activityViews:[],info:{}}},mounted:async function(){this.$aw.getInfo().then(e=>{this.info=e},e=>{console.error("Unable to connect: ",e),this.info={}})}}),je=Ce,Ee=(n("5c0b"),n("2877")),Be=Object(Ee["a"])(je,xe,Oe,!1,null,null,null),Pe=Be.exports;a["default"].use(r["a"]),"startOfDay"in localStorage||(localStorage.startOfDay="04:00"),a["default"].component("icon",()=>Promise.resolve().then(n.bind(null,"0874"))),a["default"].component("error-boundary",()=>n.e("chunk-2d0c7b05").then(n.bind(null,"524f"))),a["default"].component("input-timeinterval",()=>n.e("chunk-2d0c912a").then(n.bind(null,"581b"))),a["default"].component("aw-header",()=>n.e("chunk-2d0a3c21").then(n.bind(null,"0418"))),a["default"].component("aw-devonly",()=>n.e("chunk-2d0c76ef").then(n.bind(null,"5130"))),a["default"].component("aw-summary",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e4d057b"),n.e("chunk-64b133d7")]).then(n.bind(null,"b7f1"))),a["default"].component("aw-periodusage",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e0e08d4")]).then(n.bind(null,"2aa6"))),a["default"].component("aw-eventlist",()=>n.e("chunk-257b8108").then(n.bind(null,"25df"))),a["default"].component("aw-sunburst-categories",()=>n.e("chunk-604b6336").then(n.bind(null,"d31a"))),a["default"].component("aw-sunburst-clock",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e4d057b"),n.e("chunk-aa63c932")]).then(n.bind(null,"b2fc"))),a["default"].component("aw-timeline-inspect",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e4d057b"),n.e("chunk-0de517b8")]).then(n.bind(null,"4711"))),a["default"].component("aw-timeline",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e4d057b"),n.e("chunk-481c03fc")]).then(n.bind(null,"90a0"))),a["default"].component("vis-timeline",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e4d057b"),n.e("chunk-963d1074")]).then(n.bind(null,"34a5"))),a["default"].component("aw-categorytree",()=>n.e("chunk-34d4cb4e").then(n.bind(null,"ff65"))),a["default"].component("aw-timeline-barchart",()=>n.e("chunk-1704d656").then(n.bind(null,"a698"))),a["default"].mixin(n("8880")),a["default"].prototype.$aw=Se,a["default"].prototype.PRODUCTION=!0,new a["default"]({el:"#app",router:C,render:e=>e(Pe),store:ge})},"5acd":function(e,t,n){"use strict";n.r(t),n.d(t,"seconds_to_duration",(function(){return s})),n.d(t,"friendlydate",(function(){return i})),n.d(t,"get_day_start_with_offset",(function(){return o})),n.d(t,"get_day_end_with_offset",(function(){return c})),n.d(t,"get_day_period",(function(){return u})),n.d(t,"get_prev_day",(function(){return d})),n.d(t,"get_next_day",(function(){return l})),n.d(t,"get_offset",(function(){return h})),n.d(t,"get_today",(function(){return f}));var a=n("c1df"),r=n.n(a);function s(e){const t=Math.floor(e/60/60),n=Math.floor(e/60%60),a=Math.floor(e%60),r=[];return 0!=t&&r.push(t+"h"),0!=n&&r.push(n+"m"),0==a&&0!=r.length||r.push(a+"s"),r.join(" ")}function i(e){const t=r()(),n=r.a.parseZone(e),a=r.a.duration(n.diff(t));return-a.asSeconds()<=60?`${Math.round(-a.asSeconds())}s ago`:(a.asSeconds(),a.humanize(!0))}function o(e){const t=e?r()(e):r()().startOf("day"),n=localStorage.startOfDay,a=parseInt(n.split(":")[0]),s=parseInt(n.split(":")[1]);return t.hour(a).minute(s).format()}function c(e){return r()(o(e)).add(1,"days").format()}function u(e){return o(e)+"/"+c(e)}function d(e){return r()(e).add(-1,"days")}function l(e){return r()(e).add(1,"days")}function h(){const e=localStorage.startOfDay,[t,n]=e.split(":");return r.a.duration({hours:t,minutes:n})}function f(){return r()().subtract(h()).startOf("day").format("YYYY-MM-DD")}},"5c0b":function(e,t,n){"use strict";var a=n("8624"),r=n.n(a);r.a},8624:function(e,t,n){},8880:function(e,t,n){"use strict";function a(e,t,n){let a=t;while(a=a.$parent){const r=a.$options.errorCaptured||[];for(const s of r)if(!1===s.call(a,e,t,n))break}}n.r(t),t["default"]={beforeCreate:function(){const e=this,t=this.$options.methods||{};for(var n in t){var r=t[n];t[n]=function(){try{const t=r.apply(this,arguments);return t&&"function"===typeof t.then&&"function"===typeof t.catch?t.catch((function(t){a(t,e,n)})):t}catch(t){a(t,e,n)}}}}}}});
//# sourceMappingURL=index.9627c063.js.map