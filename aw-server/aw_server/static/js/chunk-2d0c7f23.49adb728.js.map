{"version":3,"sources":["webpack:///./src/views/activity/daily/ActivityDailyEditor.vue?67b4","webpack:///src/views/activity/daily/ActivityDailyEditor.vue","webpack:///./src/views/activity/daily/ActivityDailyEditor.vue?7e03","webpack:///./src/views/activity/daily/ActivityDailyEditor.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","editorBucketId","editorBuckets","length","_e","_l","editorBucket","key","on","$event","_s","_f","editor_duration","staticStyle","top_editor_files","top_editor_files_namefunc","top_editor_files_colorfunc","top_editor_languages","top_editor_languages_namefunc","top_editor_languages_colorfunc","top_editor_projects","top_editor_projects_namefunc","top_editor_projects_colorfunc","staticRenderFns","name","props","data","f","e","file","split","project","computed","dateEnd","dateShort","watch","console","log","refresh","queryEditorActivity","mounted","getEditorBucket","methods","async","buckets","$aw","getBuckets","catch","errorHandler","bucket","push","periods","q","query","component"],"mappings":"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","file":"js/chunk-2d0c7f23.49adb728.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-input-group-prepend',[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"Bucket\")])]),_c('b-dropdown',{attrs:{\"text\":_vm.editorBucketId || 'Select editor watcher bucket',\"size\":\"sm\",\"variant\":\"outline-secondary\"}},[_c('b-dropdown-header',[_vm._v(\"Editor bucket to use\")]),(_vm.editorBuckets.length <= 0)?_c('b-dropdown-item',{attrs:{\"name\":\"b\",\"disabled\":\"\"}},[_vm._v(\"No editor buckets available\"),_c('br'),_c('small',[_vm._v(\"Make sure you have an editor watcher installed to use this feature\")])]):_vm._e(),_vm._l((_vm.editorBuckets),function(editorBucket){return _c('b-dropdown-item-button',{key:editorBucket,on:{\"click\":function($event){_vm.editorBucketId = editorBucket}}},[_vm._v(_vm._s(editorBucket))])})],2)],1),_c('br'),_c('h6',[_vm._v(\"Active editor time: \"+_vm._s(_vm._f(\"friendlyduration\")(_vm.editor_duration)))]),(_vm.editorBucketId)?_c('div',[_c('div',{staticClass:\"row\",staticStyle:{\"padding-top\":\"0.5em\"}},[_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top file activity\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_editor_files,\"namefunc\":_vm.top_editor_files_namefunc,\"colorfunc\":_vm.top_editor_files_colorfunc,\"with_limit\":\"\"}})],1),_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top language activity\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_editor_languages,\"namefunc\":_vm.top_editor_languages_namefunc,\"colorfunc\":_vm.top_editor_languages_colorfunc,\"with_limit\":\"\"}})],1),_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top project activity\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_editor_projects,\"namefunc\":_vm.top_editor_projects_namefunc,\"colorfunc\":_vm.top_editor_projects_colorfunc,\"with_limit\":\"\"}})],1)])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv\n  b-input-group(size=\"sm\")\n    b-input-group-prepend\n      span.input-group-text\n        | Bucket\n    b-dropdown(:text=\"editorBucketId || 'Select editor watcher bucket'\", size=\"sm\", variant=\"outline-secondary\")\n      b-dropdown-header\n        | Editor bucket to use\n      b-dropdown-item(v-if=\"editorBuckets.length <= 0\", name=\"b\", disabled)\n        | No editor buckets available\n        br\n        small Make sure you have an editor watcher installed to use this feature\n      b-dropdown-item-button(v-for=\"editorBucket in editorBuckets\", :key=\"editorBucket\", @click=\"editorBucketId = editorBucket\")\n        | {{ editorBucket }}\n\n  br\n\n  h6 Active editor time: {{ editor_duration | friendlyduration }}\n\n  div(v-if=\"editorBucketId\")\n    div.row(style=\"padding-top: 0.5em;\")\n      div.col-md-4\n        h5 Top file activity\n        aw-summary(:fields=\"top_editor_files\", :namefunc=\"top_editor_files_namefunc\", :colorfunc=\"top_editor_files_colorfunc\", with_limit)\n\n      div.col-md-4\n        h5 Top language activity\n        aw-summary(:fields=\"top_editor_languages\", :namefunc=\"top_editor_languages_namefunc\", :colorfunc=\"top_editor_languages_colorfunc\", with_limit)\n\n      div.col-md-4\n        h5 Top project activity\n        aw-summary(:fields=\"top_editor_projects\", :namefunc=\"top_editor_projects_namefunc\", :colorfunc=\"top_editor_projects_colorfunc\", with_limit)\n</template>\n\n<script>\nimport moment from 'moment';\nimport { get_day_period } from \"~/util/time\";\nimport query from '~/queries';\n\n\nexport default {\n  name: \"Activity\",\n  props: ['host', 'date'],\n  data: () => {\n    return {\n      editorBuckets: [],\n      editorBucketId: \"\",\n\n      editor_duration: 0,\n\n      top_editor_files: [],\n      top_editor_files_namefunc: (e) => {\n        let f = e.data.file || \"\";\n        f = f.split(\"/\");\n        f = f[f.length-1];\n        return f;\n      },\n      top_editor_files_colorfunc: (e) => e.data.language,\n\n      top_editor_languages: [],\n      top_editor_languages_namefunc: (e) => e.data.language,\n      top_editor_languages_colorfunc: (e) => e.data.language,\n\n      top_editor_projects: [],\n      top_editor_projects_namefunc: (e) => {\n        let f = e.data.project || \"\";\n        f = f.split(\"/\");\n        f = f[f.length-1];\n        return f;\n      },\n      top_editor_projects_colorfunc: (e) => e.data.project,\n    }\n  },\n\n  computed: {\n    dateEnd: function() { return moment(this.date).add(1, 'days').format() },\n    dateShort: function() { return moment(this.date).format(\"YYYY-MM-DD\") },\n  },\n  watch: {\n    '$route': function() {\n      console.log(\"Route changed\");\n      this.refresh();\n    },\n    editorBucketId() {\n      this.queryEditorActivity();\n    },\n  },\n\n  mounted: function() {\n    this.getEditorBucket();\n    this.refresh();\n  },\n\n  methods: {\n    refresh: function() {\n      this.queryEditorActivity();\n    },\n\n    getEditorBucket: async function() {\n      const buckets = await this.$aw.getBuckets().catch(this.errorHandler);\n      for (const bucket in buckets){\n        if (buckets[bucket][\"type\"] === \"app.editor.activity\"){\n          this.editorBuckets.push(bucket);\n        }\n      }\n      if (this.editorBuckets.length > 0){\n        this.editorBucketId = this.editorBuckets[0]\n      }\n    },\n\n    queryEditorActivity: async function() {\n      if (this.editorBucketId !== \"\"){\n        const periods = [get_day_period(this.date)];\n        const q = query.editorActivityQuery(this.editorBucketId, 100);\n        const data = (await this.$aw.query(periods, q).catch(this.errorHandler))[0];\n        this.editor_duration = data[\"duration\"];\n        this.top_editor_files = data[\"files\"];\n        this.top_editor_languages = data[\"languages\"];\n        this.top_editor_projects = data[\"projects\"];\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDailyEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDailyEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivityDailyEditor.vue?vue&type=template&id=065b1e28&lang=pug&\"\nimport script from \"./ActivityDailyEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivityDailyEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}