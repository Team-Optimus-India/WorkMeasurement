{"version":3,"sources":["webpack:///./node_modules/lodash/_createRange.js","webpack:///./node_modules/lodash/_baseRange.js","webpack:///./node_modules/lodash/range.js","webpack:///./src/views/activity/daily/ActivityDailySummary.vue?bb1c","webpack:///src/views/activity/daily/ActivityDailySummary.vue","webpack:///./src/views/activity/daily/ActivityDailySummary.vue?6d74","webpack:///./src/views/activity/daily/ActivityDailySummary.vue"],"names":["baseRange","isIterateeCall","toFinite","createRange","fromRight","start","end","step","undefined","module","exports","nativeCeil","Math","ceil","nativeMax","max","index","length","result","Array","range","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","top_apps","e","data","app","top_titles","title","periodLength","datasets","_e","staticRenderFns","pick_subname_as_name","c","name","subname","children","map","split_by_hour_into_data","events","d","duration","d_start","clone","hour","h","d_end","e_start","e_end","add","props","type","String","default","computed","top_categories","top_domains","browser_buckets","top_categories_hierarchy","categories","$store","state","activity_daily","active_events","label","backgroundColor","component"],"mappings":"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","file":"js/chunk-22291cfb.d5e68ad7.js","sourcesContent":["var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row mb-4\"},[_c('div',{staticClass:\"col-md-6\"},[_c('h5',[_vm._v(\"Top Applications\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_apps,\"namefunc\":function (e) { return e.data.app; },\"colorfunc\":function (e) { return e.data.app; },\"with_limit\":\"\"}})],1),_c('div',{staticClass:\"col-md-6\"},[_c('h5',[_vm._v(\"Top Window Titles\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_titles,\"namefunc\":function (e) { return e.data.title; },\"colorfunc\":function (e) { return e.data.app; },\"with_limit\":\"\"}})],1)]),(_vm.periodLength === 'day')?_c('aw-devonly',{attrs:{\"reason\":\"Not ready for production, still experimenting\"}},[_c('div',{staticClass:\"row mb-4\"},[_c('div',{staticClass:\"col-md-12\"},[_c('aw-timeline-barchart',{attrs:{\"height\":100,\"datasets\":_vm.datasets}})],1)])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv\n  div.row.mb-4\n    div.col-md-6\n      h5 Top Applications\n      aw-summary(:fields=\"top_apps\", :namefunc=\"e => e.data.app\", :colorfunc=\"e => e.data.app\", with_limit)\n\n    div.col-md-6\n      h5 Top Window Titles\n      aw-summary(:fields=\"top_titles\", :namefunc=\"e => e.data.title\", :colorfunc=\"e => e.data.app\", with_limit)\n\n\n  aw-devonly(v-if=\"periodLength === 'day'\" reason=\"Not ready for production, still experimenting\")\n    div.row.mb-4\n      div.col-md-12\n        aw-timeline-barchart(:height=\"100\", :datasets=\"datasets\")\n\n</template>\n\n<script>\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport { build_category_hierarchy } from \"~/util/classes\";\n\nfunction pick_subname_as_name(c) {\n  c.name = c.subname;\n  c.children = c.children.map(pick_subname_as_name);\n  return c;\n}\n\n// TODO: Move somewhere else, possibly turn into a serverside transform\nfunction split_by_hour_into_data(events) {\n  if(events === undefined || events === null || events.length == 0)\n    return [];\n  const d = moment(events[0].timestamp).startOf('day');\n  return _.range(0, 24).map(h => {\n    let duration = 0;\n    const d_start = d.clone().hour(h);\n    const d_end = d.clone().hour(h + 1);\n    // This can be made faster by not checking every event per hour, but since number of events is small anyway this and this is a lot shorter and easier to read it doesn't really matter.\n    events.map(e => {\n      const e_start = moment(e.timestamp);\n      const e_end = e_start.clone().add(e.duration, 'seconds');\n      if(e_start.isBetween(d_start, d_end) || e_end.isBetween(d_start, d_end) || d_start.isBetween(e_start, e_end)) {\n        if(d_start < e_start && e_end < d_end) {\n          // If entire event is contained within the hour\n          duration += e.duration;\n        } else if(d_start < e_start) {\n          // If start of event is within the hour, but not the end\n          duration += (d_end - e_start) / 1000;\n        } else if(e_end < d_end) {\n          // If end of event is within the hour, but not the start\n          duration += (e_end - d_start) / 1000;\n        } else {\n          // Happens if event covers entire hour and more\n          duration += 3600;\n        }\n      }\n    });\n    return duration / 60 / 60;\n  });\n}\n\nexport default {\n  name: \"Activity\",\n  props: {\n    periodLength: {\n      type: String,\n      default: 'day',\n    },\n  },\n  computed: {\n    top_apps: function() { return this.$store.state.activity_daily.top_apps },\n    top_titles: function() { return this.$store.state.activity_daily.top_titles },\n    top_categories: function() { return this.$store.state.activity_daily.top_categories },\n    top_domains: function() { return this.$store.state.activity_daily.top_domains },\n    //top_urls: function() { return this.$store.state.activity_daily.top_urls },\n    browser_buckets: function() { return this.$store.state.activity_daily.browser_buckets },\n    top_categories_hierarchy: function() {\n      if(this.top_categories) {\n        const categories = this.top_categories.map(c => { return { name: c.data.$category, size: c.duration }; });\n\n        return {\n          name: \"All\",\n          children: build_category_hierarchy(categories).map(c => pick_subname_as_name(c))\n        };\n      } else {\n        return null;\n      }\n    },\n    datasets: function() {\n      const data = split_by_hour_into_data(this.$store.state.activity_daily.active_events);\n      return [{\n        label: 'Total time',\n        backgroundColor: '#6699ff',\n        data,\n      }];\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDailySummary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDailySummary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivityDailySummary.vue?vue&type=template&id=616f4257&lang=pug&\"\nimport script from \"./ActivityDailySummary.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivityDailySummary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}